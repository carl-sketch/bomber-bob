namespace SpriteKind {
    export const BONUS = SpriteKind.create()
}
controller.A.onEvent(ControllerButtonEvent.Pressed, function () {
    if (bob.vy == 0) {
        bob.vy = -150
    }
})
sprites.onOverlap(SpriteKind.Player, SpriteKind.Enemy, function (sprite, otherSprite) {
    if (bob.y < Dude.top) {
        Dude.destroy(effects.fire, 100)
        magic_number = sprites.create(img`
            . . b b b b b b b b b b b b . . 
            . b e 4 4 4 4 4 4 4 4 4 4 e b . 
            b e 4 4 4 4 4 4 4 4 4 4 4 4 e b 
            b e 4 4 4 4 4 4 4 4 4 4 4 4 e b 
            b e 4 4 4 4 4 4 4 4 4 4 4 4 e b 
            b e e 4 4 4 4 4 4 4 4 4 4 e e b 
            b e e e e e e e e e e e e e e b 
            b e e e e e e e e e e e e e e b 
            b b b b b b b d d b b b b b b b 
            c b b b b b b c c b b b b b b c 
            c c c c c c b c c b c c c c c c 
            b e e e e e c b b c e e e e e b 
            b e e e e e e e e e e e e e e b 
            b c e e e e e e e e e e e e c b 
            b b b b b b b b b b b b b b b b 
            . b b . . . . . . . . . . b b . 
            `, SpriteKind.BONUS)
        tiles.placeOnRandomTile(magic_number, sprites.dungeon.darkGroundNorthWest0)
    } else {
        game.over(true, effects.blizzard)
    }
})
let magic_number: Sprite = null
let Dude: Sprite = null
let bob: Sprite = null
tiles.setTilemap(tiles.createTilemap(hex`96001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000c0c0c0c0c0c0c0c0c0c0c0c0c00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000c000c000c000003000c00000c00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000c000c000c00000c000c00000c00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000700000700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000c000c000c00000c000c00000c00000000000000000000140000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000007000007000004040000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000c000c000c00000c000c00000c00000000000000000013131300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000700000000070004000000000404040000000700000000000000000000000000000000000000000000000000000000000000000000000000000000000c000c000c00000c060c0c030c0c0d0e00000000001110101012000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000007000000000700000004040404040404040000000000070000000000000000000000000000000000000000000000000000000000000000000000000000000c000c000c0606030c030c030000000000000000000c0c0c0c0c000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000003030000040404000004040404040404040404040404040400000007000005050005000005000500000500050005050000000000000000000000000000000000000c060c0b0c030303030303000000000000000000030f00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000303000404040404040404151515151504040404150404151504040404000005000000000000000000000000000000050000000000000000000000000000000000000c03030303030303030303000000000000000f0300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000103030304040404040415150404040404040404040404040404040404040404000f1818181818181818181818181818181919171919170f05170f000000000000000000030303030303030303030000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001010101010101010100000000000101010101030304040404040404150404040404040415040404040415150404040415040303030317171717171717171717171717171717171717171717050000000000000003030303030303030303030000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001010101010101010101010101010101010303030304040404040404040404040404040404040404040415151515151515150404040303031717171717171717171717171717171717171717171700000003030303030303030303030303000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000003030302030202020101010101010303030304040404040404040404040404040404040404040404040404040404040404030303030303031717171717171717171717171717171717171716030303030303030303030303030300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000003000003020202020202020303030303030303030304040404040404040404040404040404040404040404040404040404040404040404030303030317171616171717171717171717171717160303030303030303030303030303030303000000000000000000000000000000000000000000000000000303030000000000000000000000000303030300000000000000000000000002000002020202020202020202020202030203030304040404040404040404040404040404040404040404040404040404040404040404040303030303090a0a0a090a0a0a0a08080809090a0903030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303`, img`
    ......................................................................................................................................................
    ......................................................................................................................................................
    ......................................................................................................................................................
    ......................................................................................................................................................
    .....................................2..2.............................................................................................................
    ................................2..2......................................................................22222.......................................
    .........................2....2............2..................................................2222222.....222222......................................
    .......................2....2................2...............................................22.2........2222222......................................
    ....................22.........................22222.2..2.2..2.2.22.......................2222.2.........222..........................................
    ...................2.............................22...............2...................222222...2.......22.............................................
    .................22..............................2222222222222222222.22.22.2.........22.22....2.......................................................
    222222222.....222..........................................................22.......22........2.......................................................
    2222222222222222.............................................................2...2222.......22........................................................
    2.............................................................................2222..........2.........................................................
    ............................................................................................2.........................................................
    ...........................................................................................2..........................................................
    `, [myTiles.transparency16,sprites.builtin.forestTiles0,sprites.castle.tilePath2,sprites.castle.tilePath5,sprites.dungeon.hazardLava1,sprites.builtin.brick,sprites.builtin.crowd3,sprites.castle.rock0,sprites.builtin.oceanDepths4,sprites.builtin.oceanDepths3,sprites.builtin.coral1,sprites.builtin.crowd2,sprites.dungeon.floorLight5,sprites.dungeon.floorLightMoss,sprites.dungeon.floorLight3,sprites.dungeon.floorLight2,sprites.dungeon.greenOuterNorth0,sprites.dungeon.greenOuterNorthWest,sprites.dungeon.greenOuterNorthEast,sprites.dungeon.darkGroundNorthWest1,sprites.dungeon.chestClosed,sprites.dungeon.hazardLava0,sprites.builtin.coral0,sprites.dungeon.hazardWater,sprites.vehicle.roadHorizontal,sprites.dungeon.floorLight0], TileScale.Sixteen))
let wall = tiles.getTilesByType(sprites.builtin.forestTiles0)
bob = sprites.create(img`
    . . . . . . e e e . . . . . . . 
    . . . . . 2 2 2 2 2 . . . . . . 
    . . . . . d f d f d . . . . . . 
    . . . . . d d d d d . . . . . . 
    . . . . . . d f d . . . . . . . 
    . . . . . 7 7 7 7 7 7 f f f f f 
    . . . . . 7 7 7 7 . . . e . . . 
    . . . . . 7 7 7 7 7 7 7 7 . . . 
    . . . . . 7 7 7 7 . . . . . . . 
    . . . . . 7 7 7 7 . . . . . . . 
    . . . . . 7 7 7 7 . . . . . . . 
    . . . . . 7 7 7 7 . . . . . . . 
    . . . . . 7 7 7 7 . . . . . . . 
    . . . . . 7 . . 7 . . . . . . . 
    . . . . . 7 . . 7 . . . . . . . 
    . . . . . e e . e e . . . . . . 
    `, SpriteKind.Player)
tiles.placeOnRandomTile(bob, sprites.castle.tileDarkGrass2)
controller.moveSprite(bob, 100, 0)
bob.ay = 300
scene.cameraFollowSprite(bob)
Dude = sprites.create(img`
    . . . . f f f . . . . . . . . . 
    . . . f f f f f . . d . . . . . 
    . . . d d d d d . . d . . . . . 
    . . . d f d f d . . d e . . . . 
    . 1 . d d d d d . . . f . . . . 
    . 1 . . d d d . . . . f . . . . 
    . e f f f f f f f f f . . . . . 
    . . . . f f f f . . . . . . . . 
    . . . . f f f f . . . . . . . . 
    . . . . f f f f . . . . . . . . 
    . . . . f f f f . . . . . . . . 
    . . . . f . . f . . . . . . . . 
    . . . . f . . f . . . . . . . . 
    . . . . f . . f . . . . . . . . 
    . . . f f . f f . . . . . . . . 
    . . . . . . . . . . . . . . . . 
    `, SpriteKind.Enemy)
tiles.placeOnRandomTile(Dude, sprites.vehicle.roadHorizontal)
Dude.x += 14
game.onUpdate(function () {
    if (bob.y > 200) {
        game.over(false, effects.confetti)
    }
    if (Dude.tileKindAt(TileDirection.Left, sprites.builtin.brick)) {
        Dude.vx = 50
        Dude.setImage(img`
            . . . . f f f . . . . . . . . . 
            . . . f f f f f . . d . . . . . 
            . . . d d d d d . . d . . . . . 
            . . . d f d f d . . d e . . . . 
            . 1 . d d d d d . . . f . . . . 
            . 1 . . d d d . . . . f . . . . 
            . e f f f f f f f f f . . . . . 
            . . . . f f f f . . . . . . . . 
            . . . . f f f f . . . . . . . . 
            . . . . f f f f . . . . . . . . 
            . . . . f f f f . . . . . . . . 
            . . . . f . . f . . . . . . . . 
            . . . . f . . f . . . . . . . . 
            . . . . f . . f . . . . . . . . 
            . . . f f . f f . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            `)
    } else if (Dude.tileKindAt(TileDirection.Right, sprites.builtin.brick)) {
        Dude.vx = -50
        Dude.setImage(img`
            . . . . f f f . . . . . . . . . 
            . . . f f f f f . . d . . . . . 
            . . . d d d d d . . d . . . . . 
            . . . d f d f d . . d e . . . . 
            . 1 . d d d d d . . . f . . . . 
            . 1 . . d d d . . . . f . . . . 
            . e f f f f f f f f f . . . . . 
            . . . . f f f f . . . . . . . . 
            . . . . f f f f . . . . . . . . 
            . . . . f f f f . . . . . . . . 
            . . . . f f f f . . . . . . . . 
            . . . . f . . f . . . . . . . . 
            . . . . f . . f . . . . . . . . 
            . . . . f . . f . . . . . . . . 
            . . . f f . f f . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            `)
    } else if (controller.right.isPressed()) {
        bob.setImage(img`
            ...f..f.f..f............
            ..f...fffffff...........
            ..22..2222222...........
            ..22..ddfdfdd...........
            ..22..ddddddd...........
            ..77..ddffddd...........
            ..777..ddddd.....ddddd..
            ...77777775e77777ddddd.5
            ....777575e777777ee.....
            .....77e7e77.....ee.....
            .....777e777............
            ......757577............
            ......7e7e77............
            ......5777e5............
            ......e7777e............
            ......777777............
            ......77.777............
            ......77..77............
            ......77..77............
            ......77..77............
            ......77..77............
            ......77..77............
            ......77..77............
            ......777.777...........
            `)
    } else if (controller.left.isPressed()) {
        bob.setImage(img`
            ........................
            ........................
            .........fff..b.........
            ........22222.b.........
            ........dfdfd.b.........
            ........ddddd.ee........
            .........ddd..dd........
            bbbe77775777e.77........
            .bbe7777e777e777........
            ........e575777.........
            ........7e7e777.........
            ........775577..........
            ........77e777..........
            ........75e777..........
            ........f7f7f7f.........
            ........2e2e2e2.........
            ........2727272.........
            ........77..77..........
            ........77..77..........
            ........77..77..........
            ........77..77..........
            ........77..77..........
            .......777.777..........
            ........................
            `)
    }
})
