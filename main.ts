namespace SpriteKind {
    export const BONUS = SpriteKind.create()
}
let list: tiles.Location[] = []
controller.A.onEvent(ControllerButtonEvent.Pressed, function () {
    if (bob.vy == 0) {
        bob.vy = -150
    }
})
sprites.onOverlap(SpriteKind.Player, SpriteKind.Player, function (sprite, otherSprite) {
    magic_number.setImage(img`
        . . b b b b . . 
        . b 5 5 5 5 b . 
        b 5 d 3 3 d 5 b 
        b 5 3 5 5 1 5 b 
        c 5 3 5 5 1 d c 
        c d d 1 1 d d c 
        . f d d d d f . 
        . . f f f f . . 
        `)
    pause(500)
    otherSprite.destroy(effects.spray, 500)
    for (let value of list) {
        tiles.setTileAt(value, myTiles.transparency16)
        tiles.setWallAt(value, false)
    }
})
sprites.onOverlap(SpriteKind.Player, SpriteKind.Enemy, function (sprite, otherSprite) {
    if (sprite.y < otherSprite.top) {
        Dude.destroy(effects.fire, 100)
        magic_number = sprites.create(img`
            . . . . . . . . . b . . . . . . 
            . . . . . . . . . b b b . . . . 
            . . . . . . . . . b b . . . . . 
            b . . . . . . . . b b . . . . . 
            . b 2 . . . . . . b b . . . . . 
            . 2 2 2 . . . . . b b . . . . . 
            . . 2 2 2 . . b b b b . . . . . 
            7 7 e 7 7 7 7 7 7 7 7 7 7 e 7 7 
            7 7 e f f f f f f f f f f e 7 7 
            7 7 e 7 f 7 f 7 7 7 f 7 f e 7 7 
            7 7 e f 7 f 7 f 7 f 7 f 7 e 7 7 
            7 7 e 7 7 7 7 f f f 7 f 7 e 7 7 
            7 7 e f f f f f f f f f f e 7 7 
            7 7 e 7 7 7 7 7 7 7 7 7 7 e 7 7 
            7 7 e 7 7 7 7 7 7 7 7 7 7 e 7 7 
            7 7 e 7 7 7 7 7 7 7 7 7 7 e 7 7 
            `, SpriteKind.BONUS)
        tiles.placeOnRandomTile(magic_number, sprites.dungeon.darkGroundNorthWest0)
    } else {
        game.over(true, effects.blizzard)
    }
})
let magic_number: Sprite = null
let Dude: Sprite = null
let bob: Sprite = null
tiles.setTilemap(tiles.createTilemap(hex`96001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000c0c0c0c0c0c0c0c0c0c0c0c0c00001700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000c000c000c000003000c00000c00001700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000c000c000c00000c000c00000c00001700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000700000700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000c000c000c00000c000c00000c00001700000000000000130000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000007000007000004040000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000c000c000c00000c000c00000c00001700000000000012121200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000700000000070004000000000404040000000700000000000000000000000000000000000000000003000000000000000000000000000000000000000c000c000c00000c060c0c030c0c0d170000000000100f0f0f11000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000007000000000700000004040404040404040000000000070000000000000000001800000018000000180003000000000000000000000000000000000000000c000c000c0606030c030c030000000000000000000c0c0c0c0c000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000003030000040404000004040404040404040404040404040400000007000005050000000000000000000000000005050000000000000000000000000000000000000c060c0b0c030303030303000000000000000000030e0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000030300040404040404040414141414140404040414040414140404040400000500001b00000000000a000019190000190000000000000000000000000000000000000c03030303030303030303000000000000000e030000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001a000000000000000000000000000000000103030304040404040414140404040404040404040404040404040404040404000e1919191919190a0a191919191919191717161717160e05160e000000000000000000030303030303030303030000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001010101010101010100000000000101010303030304040404040404140404040404040414040404040414140404040414040303030316161616161616161616161616161616161616161616050000000000000003030303030303030303030000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000003030303030303030101010101010303030303030304040404040404040404040404040404040404040414141414141414140404040303031616161616161616161616161616161616161616161600000003030303030303030303030303000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000003030303030303030202020303030303030303030304040404040404040404040404040404040404040404040404040404040404030303030303031616161616161616161616161616161616161615030303030303030303030303030300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000003030303020202020202020303030303030303030304040404040404040404040404040404040404040404040404040404040404040404030303030316161515161616161616161616161616150303030303030303030303030303030303000000000000000000000000000000000000000000000000000303030000000000000000000000000303030300000000000000000000000002030303020202020202020202020202030203030304040404040404040404040404040404040404040404040404040404040404040404040303030303090a0a0a090a0a0a0a08080809090a0903030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303`, img`
    ......................................................................................................................................................
    ....................................................................................................2.................................................
    ....................................................................................................2.................................................
    ....................................................................................................2.................................................
    .....................................2..2...........................................................2.................................................
    ................................2..2................................................................2.....22222.......................................
    .........................2....2............2.....................2............................2222222.....222222......................................
    .......................2....2................2.........2...2...2.2...........................22.2........2222222......................................
    ....................22.........................22222.............22.......................2222.2.........222..........................................
    ...................2.............................22...............2...................222222...2.......22.............................................
    .................22..............................2222222222222222222.22.22.2.........22.22....2.......................................................
    222222222.....222..........................................................22.......22........2.......................................................
    2222222222222222.............................................................2...2222.......22........................................................
    2.............................................................................2222..........2.........................................................
    ............................................................................................2.........................................................
    ...........................................................................................2..........................................................
    `, [myTiles.transparency16,sprites.builtin.forestTiles0,sprites.castle.tilePath2,sprites.castle.tilePath5,sprites.dungeon.hazardLava1,sprites.builtin.brick,sprites.builtin.crowd3,sprites.castle.rock0,sprites.builtin.oceanDepths4,sprites.builtin.oceanDepths3,sprites.builtin.coral1,sprites.builtin.crowd2,sprites.dungeon.floorLight5,sprites.dungeon.floorLightMoss,sprites.dungeon.floorLight2,sprites.dungeon.greenOuterNorth0,sprites.dungeon.greenOuterNorthWest,sprites.dungeon.greenOuterNorthEast,sprites.dungeon.darkGroundNorthWest1,sprites.dungeon.chestClosed,sprites.dungeon.hazardLava0,sprites.builtin.coral0,sprites.dungeon.hazardWater,sprites.dungeon.floorLight0,sprites.dungeon.darkGroundNorthEast1,sprites.builtin.oceanDepths6,sprites.castle.tileDarkGrass2,sprites.builtin.coral5], TileScale.Sixteen))
let wall = tiles.getTilesByType(sprites.builtin.forestTiles0)
bob = sprites.create(img`
    . . . . . . e e e . . . . . . . 
    . . . . . 2 2 2 2 2 . . . . . . 
    . . . . . d f d f d . . . . . . 
    . . . . . d d d d d . . . . . . 
    . . . . . . d f d . . . . . . . 
    . . . . . 7 7 7 7 7 7 f f f f f 
    . . . . . 7 7 7 7 . . . e . . . 
    . . . . . 7 7 7 7 7 7 7 7 . . . 
    . . . . . 7 7 7 7 . . . . . . . 
    . . . . . 7 7 7 7 . . . . . . . 
    . . . . . 7 7 7 7 . . . . . . . 
    . . . . . 7 7 7 7 . . . . . . . 
    . . . . . 7 7 7 7 . . . . . . . 
    . . . . . 7 . . 7 . . . . . . . 
    . . . . . 7 . . 7 . . . . . . . 
    . . . . . e e . e e . . . . . . 
    `, SpriteKind.Player)
tiles.placeOnRandomTile(bob, sprites.castle.tileDarkGrass2)
controller.moveSprite(bob, 100, 0)
bob.ay = 300
scene.cameraFollowSprite(bob)
Dude = sprites.create(img`
    . . . . f f f . . . . . . . . . 
    . . . f f f f f . . d . . . . . 
    . . . d d d d d . . d . . . . . 
    . . . d f d f d . . d e . . . . 
    . 1 . d d d d d . . . f . . . . 
    . 1 . . d d d . . . . f . . . . 
    . e f f f f f f f f f . . . . . 
    . . . . f f f f . . . . . . . . 
    . . . . f f f f . . . . . . . . 
    . . . . f f f f . . . . . . . . 
    . . . . f f f f . . . . . . . . 
    . . . . f . . f . . . . . . . . 
    . . . . f . . f . . . . . . . . 
    . . . . f . . f . . . . . . . . 
    . . . f f . f f . . . . . . . . 
    . . . . . . . . . . . . . . . . 
    `, SpriteKind.Enemy)
tiles.placeOnRandomTile(Dude, sprites.vehicle.roadHorizontal)
Dude.x += 14
game.onUpdate(function () {
    if (bob.y > 200) {
        game.over(false, effects.confetti)
    }
    if (Dude.tileKindAt(TileDirection.Left, sprites.builtin.brick)) {
        Dude.vx = 50
        Dude.setImage(img`
            . . . . f f f . . . . . . . . . 
            . . . f f f f f . . d . . . . . 
            . . . d d d d d . . d . . . . . 
            . . . d f d f d . . d e . . . . 
            . 1 . d d d d d . . . f . . . . 
            . 1 . . d d d . . . . f . . . . 
            . e f f f f f f f f f . . . . . 
            . . . . f f f f . . . . . . . . 
            . . . . f f f f . . . . . . . . 
            . . . . f f f f . . . . . . . . 
            . . . . f f f f . . . . . . . . 
            . . . . f . . f . . . . . . . . 
            . . . . f . . f . . . . . . . . 
            . . . . f . . f . . . . . . . . 
            . . . f f . f f . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            `)
    } else if (Dude.tileKindAt(TileDirection.Right, sprites.builtin.brick)) {
        Dude.vx = -50
        Dude.setImage(img`
            . . . . f f f . . . . . . . . . 
            . . . f f f f f . . d . . . . . 
            . . . d d d d d . . d . . . . . 
            . . . d f d f d . . d e . . . . 
            . 1 . d d d d d . . . f . . . . 
            . 1 . . d d d . . . . f . . . . 
            . e f f f f f f f f f . . . . . 
            . . . . f f f f . . . . . . . . 
            . . . . f f f f . . . . . . . . 
            . . . . f f f f . . . . . . . . 
            . . . . f f f f . . . . . . . . 
            . . . . f . . f . . . . . . . . 
            . . . . f . . f . . . . . . . . 
            . . . . f . . f . . . . . . . . 
            . . . f f . f f . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            `)
    } else if (controller.right.isPressed()) {
        bob.setImage(img`
            ...b....f..f............
            ..b....fffff............
            ..22...22222............
            ..22...dfdfd............
            ..22...ddddd............
            ..77...dffdd..........b.
            ..777...ddd......bbbbbb.
            ...77777775e77777bbbbbb.
            ....777575e777777ee.b...
            .....77e7e7777...eeb....
            .....777e777.....ee.....
            ......757577............
            ......7e7e77............
            ......5777e5............
            ......e7777e............
            ......777777............
            ......77.777............
            ......77..77............
            ......77..77............
            ......77..77............
            ......77..77............
            ......77..77............
            ......77..77............
            ......777.777...........
            `)
    } else if (controller.left.isPressed()) {
        bob.setImage(img`
            ........................
            ........................
            .........fff..b.........
            ........22222.b.........
            ........dfdfd.b.........
            ........ddddd.ee........
            .........ddd..dd........
            bbbe77775777e.77........
            .bbe7777e777e777........
            ........e575777.........
            ........7e7e777.........
            ........775577..........
            ........77e777..........
            ........75e777..........
            ........f7f7f7f.........
            ........2e2e2e2.........
            ........2727272.........
            ........77..77..........
            ........77..77..........
            ........77..77..........
            ........77..77..........
            ........77..77..........
            .......777.777..........
            ........................
            `)
    }
})
