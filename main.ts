controller.A.onEvent(ControllerButtonEvent.Pressed, function () {
    if (bob.vy == 0) {
        bob.vy = -150
    }
})
sprites.onOverlap(SpriteKind.Player, SpriteKind.Enemy, function (sprite, otherSprite) {
    if (bob.y < Dude.top) {
        bob.destroy(effects.fire, 100)
        magic_number = sprites.create(img`
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . c . . . . . 
            c . . . . . . . . . c . . . . . 
            c c . . . . . . c c c . . . . . 
            . c 4 . . . . . . c c . . . . . 
            . 4 4 4 . . . . . c c . . . . . 
            . . 4 4 4 . . . . c c c c . . . 
            7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 
            7 1 1 1 1 1 1 1 1 1 1 1 1 1 1 7 
            1 c c 7 c c 7 7 c 7 c 7 c 7 7 1 
            1 c 7 c c 7 c 7 c c 7 c 7 7 c 1 
            7 1 1 1 1 1 1 1 1 1 1 1 1 1 1 7 
            7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 
            7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 
            7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 
            7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 
            `, SpriteKind.Player)
        tiles.placeOnTile(magic_number, tiles.getTileLocation(4, 10))
    } else {
        game.over(false, effects.melt)
    }
})
let magic_number: Sprite = null
let Dude: Sprite = null
let bob = 0
tiles.setTilemap(tiles.createTilemap(hex`96001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000d0d0d0d0d0d0d0d0d0d0d0d0d00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000d000d000d000003000d00000d00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000d000d000d00000d000d00000d00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000d000d000d00000d000d00000d00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000007000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000d000d000d00000d000d00000d00000000000000000014141400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000700000000070000000000000000000000000700000000000000000000000000000000000000000000000000000000000000000000000000000000000d000d000d00000d060d0d030d0d0e0f00000000001211111113000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000d000d000d0606030d030d030000000000000000000d0d0d0d0d000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000003030000000000000000000000000000000000000000000000000007000000000000000000000000000000000000000000000000000000000000000000000000000d060d0b0d030303030303000000000000000000031000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000303000000000000000000000404040400000000000400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000d030303030303030303030000000000000010030000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000c0000000000000000000000000000000001030303040404040404000000040404040404000404040400000000000000000000000000000000000000000000050303040405040404040500000000000000000000000303030303030303030300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000030101010101010101000000000001010101010303040404040404040404040404040404040404040404000000000000000003030303030300000000000005000000050303030303030304000500000000000000030303030303030303030300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000030101010101010101010101010101010103030303040404040404040404040404040404040404040404040404040404040404040403030303030503030300000000000000000000000004000000000000030303030303030303030303030000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000020303030303020302020201010101010103030303040404040404040404040404040404040404040404040404040404040404040303030303030303050000000000000000000000000000000000030303030303030303030303030303000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000030303030202020202020203030303030303030303040404040404040404040404040404040404040404040404040404040404040404040303030303000a00000a0a0a0a0a0a0a0a0a0a0a0a000303030303030303030303030303030303000000000000000000000000000000000000000000000000000303030000000000000000000000000303030300000000000000000000000002020202020202020202020202020202030203030304040404040404040404040404040404040404040404040404040404040404040404040303030303090a0a0a090a0a0a0a08080809090a0903030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303`, img`
    ......................................................................................................................................................
    ......................................................................................................................................................
    ......................................................................................................................................................
    ......................................................................................................................................................
    ........................................2.............................................................................................................
    ...................................2..................................................................................................................
    .........................2....2............2..................................................2222....................................................
    .............................................................................................22.2.....................................................
    ....................22.........................2..........................................2222.2......................................................
    ...................2..................................................................222222...2......................................................
    .................22............................................222..2....2...........22.22....2.......................................................
    22222222......222.................................222222......22............2.......22........2.......................................................
    2222222222222222.......................................2222222...................2222.......22........................................................
    ..........................................................222.................222...........2.........................................................
    .............................................................................2..............2.........................................................
    ..................................................................22222222222..............2..........................................................
    `, [myTiles.transparency16,sprites.builtin.forestTiles0,sprites.castle.tilePath2,sprites.castle.tilePath5,sprites.dungeon.hazardLava1,sprites.builtin.brick,sprites.builtin.crowd3,sprites.castle.rock0,sprites.builtin.oceanDepths4,sprites.builtin.oceanDepths3,sprites.builtin.coral1,sprites.builtin.crowd2,sprites.castle.tileDarkGrass2,sprites.dungeon.floorLight5,sprites.dungeon.floorLightMoss,sprites.dungeon.floorLight3,sprites.dungeon.floorLight2,sprites.dungeon.greenOuterNorth0,sprites.dungeon.greenOuterNorthWest,sprites.dungeon.greenOuterNorthEast,sprites.dungeon.darkGroundNorthWest1], TileScale.Sixteen))
let wall = tiles.getTilesByType(sprites.builtin.forestTiles0)
bob = sprites.create(img`
    ...f..f.f..f............
    ..f...fffffff...........
    ..22..2222222...........
    ..22..ddfdfdd...........
    ..22..ddddddd...........
    ..77..ddffddd...........
    ..777..ddddd.....ddddd..
    ...77777775e77777ddddd.5
    ....777575e777777ee.....
    .....77e7e77.....ee.....
    .....777e777............
    ......757577............
    ......7e7e77............
    ......5777e5............
    ......e7777e............
    ......777777............
    ......77.777............
    ......77..77............
    ......77..77............
    ......77..77............
    ......77..77............
    ......77..77............
    ......77..77............
    ......777.777...........
    `, SpriteKind.Player)
tiles.placeOnRandomTile(bob, sprites.castle.tileDarkGrass2)
controller.moveSprite(bob, 100, 0)
bob.ay = 300
scene.cameraFollowSprite(bob)
Dude = sprites.create(img`
    . . . . f f f . . . . . . . . . 
    . . . f f f f f . . d . . . . . 
    . . . d d d d d . . d . . . . . 
    . . . d f d f d . . d e . . . . 
    . 1 . d d d d d . . . f . . . . 
    . 1 . . d d d . . . . f . . . . 
    . e f f f f f f f f f . . . . . 
    . . . . f f f f . . . . . . . . 
    . . . . f f f f . . . . . . . . 
    . . . . f f f f . . . . . . . . 
    . . . . f f f f . . . . . . . . 
    . . . . f . . f . . . . . . . . 
    . . . . f . . f . . . . . . . . 
    . . . . f . . f . . . . . . . . 
    . . . f f . f f . . . . . . . . 
    . . . . . . . . . . . . . . . . 
    `, SpriteKind.Enemy)
tiles.placeOnRandomTile(Dude, sprites.castle.rock0)
Dude.x = 14
game.onUpdate(function () {
    if (bob > 200) {
        game.over(false, effects.confetti)
    }
    if (Dude.tileKindAt(TileDirection.Left, sprites.builtin.brick)) {
        Dude.vx = 50
        Dude.setImage(img`
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . 5 5 5 5 5 5 5 5 . . . 
            . . . 5 5 5 5 5 5 5 5 5 5 5 5 . 
            . . . 5 5 5 5 5 5 5 5 f f 5 5 5 
            . . . 5 5 5 5 5 5 5 5 f f 5 5 5 
            . . . 5 5 5 5 5 5 5 5 5 5 5 5 5 
            . . . 5 5 5 5 5 5 5 5 5 5 5 5 . 
            . . . 5 5 5 5 5 5 5 5 5 5 5 . . 
            . . . 5 5 5 5 5 5 5 5 5 5 . . . 
            . 5 5 5 5 . . . . . . . . . . . 
            5 5 5 . . . . . . . . . . . . . 
            5 5 . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            `)
    } else if (Dude.tileKindAt(TileDirection.Left, sprites.builtin.brick)) {
        Dude.vx = -50
        Dude.setImage(img`
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . 5 5 5 5 5 5 5 5 . . . 
            . . 5 5 5 5 5 5 5 5 5 5 5 5 5 . 
            . 5 5 f f 5 5 5 5 5 5 5 5 5 5 5 
            . 5 5 f f 5 5 5 5 5 5 5 5 5 5 5 
            . 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 
            . . 5 5 5 5 5 5 5 5 5 5 5 5 5 . 
            . . 5 5 5 5 5 5 5 5 5 5 5 5 . . 
            . . 5 5 5 5 5 5 5 5 5 5 5 5 . . 
            . . . . . . . . . . . . 5 5 5 . 
            . . . . . . . . . . . . . . 5 . 
            . . . . . . . . . . . . . . 5 5 
            . . . . . . . . . . . . . . 5 5 
            . . . . . . . . . . . . . . . . 
            `)
    } else if (controller.right.isPressed()) {
        bob.setImage(img`
            ...f..f.f..f............
            ..f...fffffff...........
            ..22..2222222...........
            ..22..ddfdfdd...........
            ..22..ddddddd...........
            ..77..ddffddd...........
            ..777..ddddd.....ddddd..
            ...77777775e77777ddddd.5
            ....777575e777777ee.....
            .....77e7e77.....ee.....
            .....777e777............
            ......757577............
            ......7e7e77............
            ......5777e5............
            ......e7777e............
            ......777777............
            ......77.777............
            ......77..77............
            ......77..77............
            ......77..77............
            ......77..77............
            ......77..77............
            ......77..77............
            ......777.777...........
            `)
    } else if (controller.left.isPressed()) {
        bob.setImage(img`
            ........................
            ........................
            .........fff..b.........
            ........22222.b.........
            ........dfdfd.b.........
            ........ddddd.ee........
            .........ddd..dd........
            bbbe77775777e.77........
            .bbe7777e777e777........
            ........e575777.........
            ........7e7e777.........
            ........775577..........
            ........77e777..........
            ........75e777..........
            ........f7f7f7f.........
            ........2e2e2e2.........
            ........2727272.........
            ........77..77..........
            ........77..77..........
            ........77..77..........
            ........77..77..........
            ........77..77..........
            .......777.777..........
            ........................
            `)
    }
})
