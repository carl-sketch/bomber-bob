namespace SpriteKind {
    export const BONUS = SpriteKind.create()
    export const GUN = SpriteKind.create()
}
let list: tiles.Location[] = []
controller.B.onEvent(ControllerButtonEvent.Pressed, function () {
    if (bob.vy == 0) {
        bob.vy = -150
    }
})
function Make_Tilemape (Levle: number) {
    if (Levle == 1) {
        tiles.setTilemap(tiles.createTilemap(hex`96001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000004040404040400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000004000000000000000004000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000040000000000000004040400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000404040000000004050404000000000000000000000000000000000000000000000000000003000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000040404050505040400000000000000000000000000000000000000000000000003000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000004050505050504040000000000070700000000000000000000000000000003000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000010101010100000000000202020204050505050505050402020202040400000000000009000000000000000003000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000020202020202020202020202020202020202020202020202020202020202020206060602060606060202020202020808080800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000`, img`
            ......................................................................................................................................................
            ......................................................................................................................................................
            ........222222........................................................................................................................................
            .....2........2.......................................................................................................................................
            ......2.......222.....................................................................................................................................
            .......222....2.22....................................................................................................................................
            ............222...22..................................................................................................................................
            ..............2.....22.....22.........................................................................................................................
            ..........2222222222222222222.........................................................................................................................
            22222222222.......222222222..22.........2222222222....................................................................................................
            ......222.....................22222222222222222222....................................................................................................
            ......................................................................................................................................................
            ......................................................................................................................................................
            ......................................................................................................................................................
            ......................................................................................................................................................
            ......................................................................................................................................................
            `, [myTiles.transparency16,sprites.builtin.forestTiles0,sprites.builtin.brick,sprites.dungeon.chestClosed,sprites.dungeon.stairLadder,sprites.dungeon.hazardLava1,sprites.vehicle.roadHorizontal,sprites.castle.rock0,myTiles.tile2,sprites.castle.rock2], TileScale.Sixteen))
    } else if (Levle == 1) {
        tiles.setTilemap(tiles.createTilemap(hex`96001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000003030303030300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000003000000000000000003000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000030000000000000003030300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000303030000000003040303000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000030303040404030300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000703040404040403030000000000060600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000008010101010103040404040404040301010101030300000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000801010101010101010101010101010101010101030101010505050a01050505050101010101010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000090909090909080101010101010101010101010101010101010101010101010101010101010101010101010101010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000`, img`
            ......................................................................................................................................................
            ......................................................................................................................................................
            ........222222........................................................................................................................................
            .....2........2.......................................................................................................................................
            ......2.......222.....................................................................................................................................
            .......222....2.22....................................................................................................................................
            ............222...22..................................................................................................................................
            ..............2.....22................................................................................................................................
            ........222222222222222222222.........................................................................................................................
            .......2..........222222222..22.........2222222.......................................................................................................
            ......2.......................22222222222.............................................................................................................
            222222................................................................................................................................................
            ......................................................................................................................................................
            ......................................................................................................................................................
            ......................................................................................................................................................
            ......................................................................................................................................................
            `, [myTiles.transparency16,sprites.builtin.brick,sprites.dungeon.chestClosed,sprites.dungeon.stairLadder,sprites.dungeon.hazardLava1,sprites.vehicle.roadHorizontal,sprites.castle.rock0,myTiles.tile2,sprites.dungeon.stairLarge,sprites.builtin.forestTiles0,sprites.castle.rock2], TileScale.Sixteen))
        loaded += 0
        tiles.placeOnRandomTile(bob, sprites.builtin.forestTiles0)
        Dude = sprites.create(img`
            . . . . f f f . . . . . . . . . 
            . . . f f f f f . . d . . . . . 
            . . . d d d d d . . d . . . . . 
            . . . d f d f d . . d e . . . . 
            . 1 . d d d d d . . . f . . . . 
            . 1 . . d d d . . . . f . . . . 
            . e f f f f f f f f f . . . . . 
            . . . . f f f f . . . . . . . . 
            . . . . f f f f . . . . . . . . 
            . . . . f f f f . . . . . . . . 
            . . . . f f f f . . . . . . . . 
            . . . . f . . f . . . . . . . . 
            . . . . f . . f . . . . . . . . 
            . . . . f . . f . . . . . . . . 
            . . . f f . f f . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            `, SpriteKind.Enemy)
        tiles.placeOnRandomTile(Dude, sprites.vehicle.roadHorizontal)
        Dude.x += 14
    }
}
controller.A.onEvent(ControllerButtonEvent.Pressed, function () {
    if (loaded > 0) {
        if (retning == 1) {
            projectile = sprites.createProjectileFromSprite(img`
                ..............eeeeeee...........
                ............ee455662e2e.........
                ..........ee45556723e2688.......
                .........e46776677232e777668....
                ........e46745554772227776778...
                .......4448744444777766777678...
                ......4522e7777776777766676668..
                .....4523227766722e666eeeee888..
                ....455232e76672322e4555dddd48..
                ...44567777554623e455ddddddddd4.
                ...e66774554477e455dddd55554dd44
                ..e46777444677e55dd55555d55dddd4
                ..e5668677666e5dd555555555555dde
                .e45544e8776e5d555554555555555de
                .e554eeee66e5d5555d55555dddd54de
                .e55ee44fee5d5d555555d5d5dddddde
                e454eeeefe45d55555555555dd4ddde.
                e5e4eefffe5d55555555d5555dddde..
                e5ee4eeff45d555555555555dddde...
                e5eeeeffe5d55d555d5555d5ddde....
                e5ffefeee5d55545555555ddd4e.....
                e5ffffffe545555555d5d4ddee......
                e54efeff45d55d55555dddde........
                e5eeeffe5dd5555545dddee.........
                e4eeefff5d5555d55ddde...........
                e4efefff5d5d55555d4e............
                .e4efffe5d555555dee.............
                .e54eeee5d545dd4e...............
                ..e554ee5dddddee................
                ...ee5544dddee..................
                .....eeeeeee....................
                ................................
                `, bob, 120, 0)
            loaded += -1
        } else if (retning == 0) {
            projectile = sprites.createProjectileFromSprite(img`
                ..............eeeeeee...........
                ............ee455662e2e.........
                ..........ee45556723e2688.......
                .........e46776677232e777668....
                ........e46745554772227776778...
                .......4448744444777766777678...
                ......4522e7777776777766676668..
                .....4523227766722e666eeeee888..
                ....455232e76672322e4555dddd48..
                ...44567777554623e455ddddddddd4.
                ...e66774554477e455dddd55554dd44
                ..e46777444677e55dd55555d55dddd4
                ..e5668677666e5dd555555555555dde
                .e45544e8776e5d555554555555555de
                .e554eeee66e5d5555d55555dddd54de
                .e55ee44fee5d5d555555d5d5dddddde
                e454eeeefe45d55555555555dd4ddde.
                e5e4eefffe5d55555555d5555dddde..
                e5ee4eeff45d555555555555dddde...
                e5eeeeffe5d55d555d5555d5ddde....
                e5ffefeee5d55545555555ddd4e.....
                e5ffffffe545555555d5d4ddee......
                e54efeff45d55d55555dddde........
                e5eeeffe5dd5555545dddee.........
                e4eeefff5d5555d55ddde...........
                e4efefff5d5d55555d4e............
                .e4efffe5d555555dee.............
                .e54eeee5d545dd4e...............
                ..e554ee5dddddee................
                ...ee5544dddee..................
                .....eeeeeee....................
                ................................
                `, bob, -120, 0)
        }
        loaded += -1
    }
})
sprites.onOverlap(SpriteKind.Player, SpriteKind.GUN, function (sprite, otherSprite) {
    magic_number.destroy(effects.confetti, 500)
    loaded += 5
})
scene.onOverlapTile(SpriteKind.Player, sprites.dungeon.chestClosed, function (sprite, location) {
    level += 1
    Make_Tilemape(level)
    tiles.placeOnRandomTile(bob, sprites.castle.tileDarkGrass2)
})
sprites.onOverlap(SpriteKind.Player, SpriteKind.Player, function (sprite, otherSprite) {
    magic_number.setImage(img`
        . . . . . . . e e e e . . . . . 
        . . . . . e e 4 5 5 5 e e . . . 
        . . . . e 4 5 6 2 2 7 6 6 e . . 
        . . . e 5 6 6 7 2 2 6 4 4 4 e . 
        . . e 5 2 2 7 6 6 4 5 5 5 5 4 . 
        . e 5 6 2 2 8 8 5 5 5 5 5 4 5 4 
        . e 5 6 7 7 8 5 4 5 4 5 5 5 5 4 
        e 4 5 8 6 6 5 5 5 5 5 5 4 5 5 4 
        e 5 c e 8 5 5 5 4 5 5 5 5 5 5 4 
        e 5 c c e 5 4 5 5 5 4 5 5 5 e . 
        e 5 c c 5 5 5 5 5 5 5 5 4 e . . 
        e 5 e c 5 4 5 4 5 5 5 e e . . . 
        e 5 e e 5 5 5 5 5 4 e . . . . . 
        4 5 4 e 5 5 5 5 e e . . . . . . 
        . 4 5 4 5 5 4 e . . . . . . . . 
        . . 4 4 e e e . . . . . . . . . 
        `)
    pause(1000)
    otherSprite.destroy(effects.spray, 500)
    for (let value of list) {
        tiles.setTileAt(value, myTiles.transparency16)
        tiles.setWallAt(value, false)
    }
})
sprites.onOverlap(SpriteKind.Player, SpriteKind.Enemy, function (sprite, otherSprite) {
    if (sprite.y < otherSprite.top) {
        otherSprite.destroy(effects.fire, 100)
        magic_number = sprites.create(img`
            ..............eeeeeee...........
            ............ee455662e2e.........
            ..........ee45556723e2688.......
            .........e46776677232e777668....
            ........e46745554772227776778...
            .......4448744444777766777678...
            ......4522e7777776777766676668..
            .....4523227766722e666eeeee888..
            ....455232e76672322e4555dddd48..
            ...44567777554623e455ddddddddd4.
            ...e66774554477e455dddd55554dd44
            ..e46777444677e55dd55555d55dddd4
            ..e5668677666e5dd555555555555dde
            .e45544e8776e5d555554555555555de
            .e554eeee66e5d5555d55555dddd54de
            .e55ee44fee5d5d555555d5d5dddddde
            e454eeeefe45d55555555555dd4ddde.
            e5e4eefffe5d55555555d5555dddde..
            e5ee4eeff45d555555555555dddde...
            e5eeeeffe5d55d555d5555d5ddde....
            e5ffefeee5d55545555555ddd4e.....
            e5ffffffe545555555d5d4ddee......
            e54efeff45d55d55555dddde........
            e5eeeffe5dd5555545dddee.........
            e4eeefff5d5555d55ddde...........
            e4efefff5d5d55555d4e............
            .e4efffe5d555555dee.............
            .e54eeee5d545dd4e...............
            ..e554ee5dddddee................
            ...ee5544dddee..................
            .....eeeeeee....................
            ................................
            `, SpriteKind.BONUS)
        tiles.placeOnRandomTile(magic_number, sprites.castle.rock2)
        chest = sprites.create(img`
            . . . . . . . . . . b 5 b . . . 
            . . . . . . . . . b 5 b . . . . 
            . . . . . . b b b b b b . . . . 
            . . . . . b b 5 5 5 5 5 b . . . 
            . . . . b b 5 d 1 f 5 5 d f . . 
            . . . . b 5 5 1 f f 5 d 4 c . . 
            . . . . b 5 5 d f b d d 4 4 . . 
            . b b b d 5 5 5 5 5 4 4 4 4 4 b 
            b d d d b b d 5 5 4 4 4 4 4 b . 
            b b d 5 5 5 b 5 5 5 5 5 5 b . . 
            c d c 5 5 5 5 d 5 5 5 5 5 5 b . 
            c b d c d 5 5 b 5 5 5 5 5 5 b . 
            . c d d c c b d 5 5 5 5 5 d b . 
            . . c b d d d d d 5 5 5 b b . . 
            . . . c c c c c c c c b b . . . 
            . . . . . . . . . . . . . . . . 
            `, SpriteKind.GUN)
        tiles.placeOnRandomTile(chest, sprites.vehicle.roadHorizontal)
    }
})
let chest: Sprite = null
let magic_number: Sprite = null
let projectile: Sprite = null
let retning = 0
let loaded = 0
let Dude: Sprite = null
let bob: Sprite = null
let level = 0
level = 1
Make_Tilemape(level)
let wall = tiles.getTilesByType(sprites.builtin.forestTiles0)
bob = sprites.create(img`
    . . . . . . e e e . . . . . . . 
    . . . . . 2 2 2 2 2 . . . . . . 
    . . . . . d f d f d . . . . . . 
    . . . . . d d d d d . . . . . . 
    . . . . . . d f d . . . . . . . 
    . . . . . 7 7 7 7 7 7 f f f f f 
    . . . . . 7 7 7 7 . . . e . . . 
    . . . . . 7 7 7 7 7 7 7 7 . . . 
    . . . . . 7 7 7 7 . . . . . . . 
    . . . . . 7 7 7 7 . . . . . . . 
    . . . . . 7 7 7 7 . . . . . . . 
    . . . . . 7 7 7 7 . . . . . . . 
    . . . . . 7 7 7 7 . . . . . . . 
    . . . . . 7 . . 7 . . . . . . . 
    . . . . . 7 . . 7 . . . . . . . 
    . . . . . e e . e e . . . . . . 
    `, SpriteKind.Player)
tiles.placeOnRandomTile(bob, sprites.builtin.forestTiles0)
controller.moveSprite(bob, 100, 0)
bob.ay = 300
scene.cameraFollowSprite(bob)
Dude = sprites.create(img`
    . . . . f f f . . . . . . . . . 
    . . . f f f f f . . d . . . . . 
    . . . d d d d d . . d . . . . . 
    . . . d f d f d . . d e . . . . 
    . 1 . d d d d d . . . f . . . . 
    . 1 . . d d d . . . . f . . . . 
    . e f f f f f f f f f . . . . . 
    . . . . f f f f . . . . . . . . 
    . . . . f f f f . . . . . . . . 
    . . . . f f f f . . . . . . . . 
    . . . . f f f f . . . . . . . . 
    . . . . f . . f . . . . . . . . 
    . . . . f . . f . . . . . . . . 
    . . . . f . . f . . . . . . . . 
    . . . f f . f f . . . . . . . . 
    . . . . . . . . . . . . . . . . 
    `, SpriteKind.Enemy)
tiles.placeOnRandomTile(Dude, sprites.vehicle.roadHorizontal)
Dude.x += 14
loaded = 0
retning = 1
game.onUpdate(function () {
    if (bob.y > 300) {
        game.over(false, effects.confetti)
    }
    if (Dude.tileKindAt(TileDirection.Left, sprites.builtin.brick)) {
        Dude.vx = -50
        Dude.setImage(img`
            . . . . f f f . . . . . . . . . 
            . . . f f f f f . . d . . . . . 
            . . . d d d d d . . d . . . . . 
            . . . d f d f d . . d e . . . . 
            . 1 . d d d d d . . . f . . . . 
            . 1 . . d d d . . . . f . . . . 
            . e f f f f f f f f f . . . . . 
            . . . . f f f f . . . . . . . . 
            . . . . f f f f . . . . . . . . 
            . . . . f f f f . . . . . . . . 
            . . . . f f f f . . . . . . . . 
            . . . . f . . f . . . . . . . . 
            . . . . f . . f . . . . . . . . 
            . . . . f . . f . . . . . . . . 
            . . . f f . f f . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            `)
        if (controller.right.isPressed()) {
            Dude.vx = 50
            Dude.setImage(img`
                . . . . f f f . . . . . . . . . 
                . . . f f f f f . . d . . . . . 
                . . . d d d d d . . d . . . . . 
                . . . d f d f d . . d e . . . . 
                . 1 . d d d d d . . . f . . . . 
                . 1 . . d d d . . . . f . . . . 
                . e f f f f f f f f f . . . . . 
                . . . . f f f f . . . . . . . . 
                . . . . f f f f . . . . . . . . 
                . . . . f f f f . . . . . . . . 
                . . . . f f f f . . . . . . . . 
                . . . . f . . f . . . . . . . . 
                . . . . f . . f . . . . . . . . 
                . . . . f . . f . . . . . . . . 
                . . . f f . f f . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                `)
            retning = 1
            bob.setImage(img`
                ...b....f..f............
                ..b....fffff............
                ..22...22222............
                ..22...dfdfd............
                ..22...ddddd............
                ..77...dffdd..........b.
                ..777...ddd......bbbbbb.
                ...77777775e77777bbbbbb.
                ....777575e777777ee.b...
                .....77e7e7777...eeb....
                .....777e777.....ee.....
                ......757577............
                ......7e7e77............
                ......5777e5............
                ......e7777e............
                ......777777............
                ......77.777............
                ......77..77............
                ......77..77............
                ......77..77............
                ......77..77............
                ......77..77............
                ......77..77............
                ......777.777...........
                `)
        } else if (controller.left.isPressed()) {
            retning = 0
        }
        bob.setImage(img`
            ........................
            ........................
            .........fff..b.........
            ........22222.b.........
            ........dfdfd.b.........
            ........ddddd.ee........
            .........ddd..dd........
            bbbe77775777e.77........
            .bbe7777e777e777........
            ........e575777.........
            ........7e7e777.........
            ........775577..........
            ........77e777..........
            ........75e777..........
            ........f7f7f7f.........
            ........2e2e2e2.........
            ........2727272.........
            ........77..77..........
            ........77..77..........
            ........77..77..........
            ........77..77..........
            ........77..77..........
            .......777.777..........
            ........................
            `)
    }
})
