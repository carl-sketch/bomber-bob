controller.A.onEvent(ControllerButtonEvent.Pressed, function () {
    if (bob.vy == 0) {
        bob.vy = -200
    }
})
let bob: Sprite = null
tiles.setTilemap(tiles.createTilemap(hex`640010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000030303030303030303030303030000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000300030003000003000300000300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000003000300030000030003000003000000000000000000000000000000000000000000000000000000000000000000000000000000000000080000000000000000000000000000000000000000000000000000000000000000000000000000000000000000030003000300000300030000030000000000000000000000000000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000300030003000003000306060300000000000000000000000000000000000000000000000000000008000000000800000000000000000000000008000000000000000000000000000000000000000000000000000000000000000000000000000000000003000300030000030703030303000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000030003000307070303030303000000000000000000000000000000000000000000000003030000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000000000000000000000000000000000307030c0303030303030300000000000000000000000000000000000000000000000303000000000000000000000404040400000000000400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000303030303030303030303000000000d000000000000000000000000000000000103030304040404040400000004040404040400040404040000000000000000000000000000000000000000000005030304040504040404050000000000000000000000030303030303030303030000000000010101010101010101000000000001010101010303040404040404040404040404040404040404040404000000000000000003030303030300000000000005000000050303030303030304000500000000000000030303030303030303030300000000000301010101010101010101010101010101030303030404040404040404040404040404040404040404040404040404040404040404030303030305030303000000000000000000000000040000000000000303030303030303030303030300000000000002030303030302030202020101010101010303030304040404040404040404040404040404040404040404040404040404040404030303030303030305000000000000000000000000000000000003030303030303030303030303030300000000000000030303030202020202020203030303030303030303040404040404040404040404040404040404040404040404040404040404040404040303030303000b00000b0b0b0b0b0b0b0b0b0b0b0b000303030303030303030303030303030300000000000000020202020202020202020202020202020302030303040404040404040404040404040404040404040404040404040404040404040404040403030303030a0b0b0b0a0b0b0b0b0909090a0a0b0a0303030303030303030303030303030000000000000000`, img`
    ....................................................................................................
    ....................................................................................................
    ....................................................................................................
    ....................................................................................................
    ........................................2...........................................................
    ...................................2................................................................
    .........................2....2............2..................................................2222..
    .............................................................................................22.2...
    ....................22.........................2..........................................2222.2....
    ...................2..................................................................222222...2....
    2................22............................................222..2....2...........22.22....2.....
    22222222......222.................................222222......22............2.......22........2.....
    ......2222222222.......................................2222222...................2222.......22......
    ..........................................................222.................222...........2.......
    .............................................................................2..............2.......
    ..................................................................22222222222..............2........
    `, [myTiles.transparency16,sprites.builtin.forestTiles0,sprites.castle.tilePath2,sprites.castle.tilePath5,sprites.dungeon.hazardLava1,sprites.builtin.brick,sprites.builtin.crowd5,sprites.builtin.crowd3,sprites.castle.rock0,sprites.builtin.oceanDepths4,sprites.builtin.oceanDepths3,sprites.builtin.coral1,sprites.builtin.crowd2,sprites.castle.tileDarkGrass2], TileScale.Sixteen))
let wall = tiles.getTilesByType(sprites.builtin.forestTiles0)
bob = sprites.create(img`
    . . . . . . e e e . . . . . . . 
    . . . . . 2 2 2 2 2 . . . . . . 
    . . . . . d f d f d . . . . . . 
    . . . . . d d d d d . . . . . . 
    . . . . . . d f d . . . . . . . 
    . . . . . 7 7 7 7 7 7 7 b b b . 
    . . . . . 7 7 7 7 . . . e . . . 
    . . . . . 7 7 7 7 7 7 7 7 . . . 
    . . . . . 7 7 7 7 . . . . . . . 
    . . . . . 7 7 7 7 . . . . . . . 
    . . . . . 7 7 7 7 . . . . . . . 
    . . . . . 7 7 7 7 . . . . . . . 
    . . . . . 7 7 7 7 . . . . . . . 
    . . . . . 7 . . 7 . . . . . . . 
    . . . . . 7 . . 7 . . . . . . . 
    . . . . . e e . e e . . . . . . 
    `, SpriteKind.Player)
tiles.placeOnRandomTile(bob, sprites.castle.tileDarkGrass2)
controller.moveSprite(bob, 100, 0)
bob.ay = 300
scene.cameraFollowSprite(bob)
let Dude = sprites.create(img`
    . . . . f f f . . . . . . . . . 
    . . . f f f f f . . d . . . . . 
    . . . d d d d d . . d . . . . . 
    . . . d f d f d . . d e . . . . 
    . 1 . d d d d d . . . f . . . . 
    . 1 . . d d d . . . . f . . . . 
    . e f f f f f f f f f . . . . . 
    . . . . f f f f . . . . . . . . 
    . . . . f f f f . . . . . . . . 
    . . . . f f f f . . . . . . . . 
    . . . . f f f f . . . . . . . . 
    . . . . f . . f . . . . . . . . 
    . . . . f . . f . . . . . . . . 
    . . . . f . . f . . . . . . . . 
    . . . f f . f f . . . . . . . . 
    . . . . . . . . . . . . . . . . 
    `, SpriteKind.Enemy)
tiles.placeOnRandomTile(Dude, sprites.castle.rock0)
Dude.x = 14
game.onUpdate(function () {
    if (bob.y > 500) {
        game.over(false, effects.confetti)
    }
    if (Dude.tileKindAt(TileDirection.Left, sprites.dungeon.hazardLava1)) {
        Dude.setVelocity(50, 50)
        Dude.setImage(img`
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . 5 5 5 5 5 5 5 5 . . . 
            . . . 5 5 5 5 5 5 5 5 5 5 5 5 . 
            . . . 5 5 5 5 5 5 5 5 f f 5 5 5 
            . . . 5 5 5 5 5 5 5 5 f f 5 5 5 
            . . . 5 5 5 5 5 5 5 5 5 5 5 5 5 
            . . . 5 5 5 5 5 5 5 5 5 5 5 5 . 
            . . . 5 5 5 5 5 5 5 5 5 5 5 . . 
            . . . 5 5 5 5 5 5 5 5 5 5 . . . 
            . 5 5 5 5 . . . . . . . . . . . 
            5 5 5 . . . . . . . . . . . . . 
            5 5 . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            `)
    } else if (Dude.tileKindAt(TileDirection.Left, sprites.dungeon.hazardLava1)) {
        let mySprite: Sprite = null
        mySprite.vx = -50
        Dude.setImage(img`
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . 5 5 5 5 5 5 5 5 . . . 
            . . . 5 5 5 5 5 5 5 5 5 5 5 5 . 
            . . . 5 5 5 5 5 5 5 5 f f 5 5 5 
            . . . 5 5 5 5 5 5 5 5 f f 5 5 5 
            . . . 5 5 5 5 5 5 5 5 5 5 5 5 5 
            . . . 5 5 5 5 5 5 5 5 5 5 5 5 . 
            . . . 5 5 5 5 5 5 5 5 5 5 5 . . 
            . . . 5 5 5 5 5 5 5 5 5 5 . . . 
            . 5 5 5 5 . . . . . . . . . . . 
            5 5 5 . . . . . . . . . . . . . 
            5 5 . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            `)
    } else if (controller.right.isPressed()) {
        bob.setImage(img`
            ........................
            ....ffffff..............
            ..ffeeeef2f.............
            .ffeeeef222f............
            .feeeffeeeef...cc.......
            .ffffee2222ef.cdc.......
            .fe222ffffe2fcddc.......
            fffffffeeeffcddc........
            ffe44ebf44ecddc.........
            fee4d41fddecdc..........
            .feee4dddedccc..........
            ..ffee44e4dde...........
            ...f222244ee............
            ...f2222e2f.............
            ...f444455f.............
            ....ffffff..............
            .....fff................
            ........................
            ........................
            ........................
            ........................
            ........................
            ........................
            ........................
            `)
    } else if (controller.left.isPressed()) {
        bob.setImage(img`
            ..............ffffff....
            .............f2feeeeff..
            ............f222feeeeff.
            ............feeeeffeeef.
            ...........fe2222eeffff.
            ...........f2effff222ef.
            ...........fffeeefffffff
            ...........fee44fbe44eff
            ............feddf14d4eef
            .............fdddd4eeef.
            .............fe444eddf..
            .............ccc22eddf..
            .............cdc22fee...
            ............cddc4444f...
            ...........cddcfffff....
            ..........cddc..fff.....
            ..........cdc...........
            ..........cc............
            ........................
            ........................
            ........................
            ........................
            ........................
            ........................
            `)
    }
})
